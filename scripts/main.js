function statusChangeCallback(a){console.log("statusChangeCallback"),console.log(a.status),"/admin.html"!==window.location.pathname&&(window.location="connected"===a.status?"/index.html#/discovery":"not_authorized"===a.status?"/index.html#/login":"/index.html#/login")}function checkLoginState(){FB.getLoginStatus(function(a){statusChangeCallback(a)})}!function(){Em.TimeoutTouchEventType={Cancel:"cancel",End:"end"},Em.TimeoutTouchEvent=function(a){this.type=a.type}}(),function(){var a=Em.get,b=Em.set;Em.TouchList=Em.Object.extend({touches:null,timestamp:null,init:function(){this._super(),b(this,"touches",[])},addTouch:function(b){var c=a(this,"touches");c.push(b),this.notifyPropertyChange("touches")},updateTouch:function(b){for(var c=a(this,"touches"),d=0,e=c.length;e>d;d++){var f=c[d];if(f.identifier===b.identifier){c[d]=b,this.notifyPropertyChange("touches");break}}},removeAllTouches:function(){b(this,"touches",[])},touchWithId:function(b){for(var c=null,d=a(this,"touches"),e=0,f=d.length;f>e;e++){var g=d[e];if(g.identifier===b){c=g;break}}return c},length:Ember.computed(function(){var b=a(this,"touches");return b.length}).property("touches").cacheable()})}(),function(){var a=(Em.get,Em.set);Em.ApplicationGestureManager=Em.Object.extend({_delegates:null,isAllBlocked:!1,_gestures:null,_blockerView:null,_isBlocked:!1,_shouldReceiveTouchFn:null,init:function(){this._super(),this._gestures={},this._delegates={}},registerGesture:function(a,b){if(void 0!==this._gestures[a])throw new Ember.Error(a+" already exists as a registered gesture recognizer. Gesture recognizers must have globally unique names.");this._gestures[a]=b},unregisterGesture:function(a){this._gestures[a]&&delete this._gestures[a]},knownGestures:function(){return this._gestures||{}},registerDelegate:function(a){this._delegates[a.get("name")]=a},findDelegate:function(a){return this._delegates[a]},isBlocked:Ember.computed(function(){return this.get("_isBlocked")}).property("_isBlocked"),shouldReceiveTouch:function(a){return this.get("_shouldReceiveTouchFn")(a)},block:function(b,c){if(this.get("isBlocked"))throw new Error("manager has already blocked the gesture recognizer");a(this,"_shouldReceiveTouchFn",c),a(this,"_isBlocked",!0),a(this,"_blockerView",b)},unblock:function(a){if(!this.get("isBlocked"))throw new Error("unblock, the gesture recognizer when the recognizer was not blocked. Did you unblock after Start? ");var b=this.get("_blockerView");if(a!==b)throw new Error("unblock a view which was not the one which blocked the gesture recognizer");this.set("_isBlocked",!1),this.set("_blockerView",null),this.set("_shouldReceiveTouchFn",null)}})}(),function(){Em.GestureDelegateRule=Em.Object.extend({shouldReceiveTouch:function(){}})}(),function(){Em.GestureDelegate=Em.Object.extend({name:null,rules:null,init:function(){this._super();var a,b=this.rules,c=[];if(b){var d,e;for(d=0,e=b.length;e>d;d++)a=b[d],"string"===Em.typeOf(a)&&(a=Em.get(a)),a.isInstance||(a=a.create()),c.push(a)}this.rules=c},shouldReceiveTouch:function(){return!0}})}(),function(){Em.get,Em.set;Em.GestureManager=Em.Object.extend({gestures:null,applicationGestureManager:Ember.computed(function(){return this.view.get("container").lookup("gesture:application")}),container:null,view:null,touchStart:function(a){return this._invokeEvent("touchStart",a)},touchMove:function(a){return this._invokeEvent("touchMove",a)},touchEnd:function(a){return this._invokeEvent("touchEnd",a)},touchCancel:function(a){return this._invokeEvent("touchCancel",a)},_invokeEvent:function(a,b){var c,d=this.get("gestures"),e=d.length,f=!0;c=this.view[a],"function"===Em.typeOf(c)&&c.call(this.view,b);var g=this.get("applicationGestureManager");if(!g.get("isAllBlocked")){if(e>0){var h=g.get("isBlocked")?g.shouldReceiveTouch(this.view):!0;if(h){var i,j,k,l;for(l=0;e>l;l++)i=d[l],c=i[a],"function"===Em.typeOf(c)&&(j=i.get("delegate"),i.get("isEnabled")?j?(k=this._applyDelegateRules(j,i,this.view,b),void 0===k&&(k=j.shouldReceiveTouch(i,this.view,b))):k=!0:k=!1,k&&(f=c.call(i,b)))}}var m=this.view.get("parentView");if(m){var n=m.get("eventManager");n&&n._invokeEvent(a,b)}}return f},_applyDelegateRules:function(a,b,c,d){var e=a.rules,f=e.length;if(f>0){var g,h;for(g=0;f>g;g++)if(h=e[g].shouldReceiveTouch(b,c,d),void 0!==h)return h}return void 0}})}(),function(){var a=Em.get,b=Em.set;Em.Gesture=Em.Object.extend({state:null,name:null,view:null,applicationGestureManager:Ember.computed(function(){return this.view.get("container").lookup("gesture:application")}),container:null,gestureIsDiscrete:!1,simultaneously:!0,delegateName:null,delegate:null,isEnabled:!0,touches:null,numberOfActiveTouches:0,numberOfRequiredTouches:1,init:function(){this._super(),this.touches=Em.TouchList.create(),this.name=a(this,"name");var c=this.get("delegateName"),d=this.get("delegate");if(!d&&c){var e=a(this,"applicationGestureManager");d=e.findDelegate(c),Em.assert("empty delegate, attempting to set up delegate based on delegateName",d),b(this,"delegate",d)}},didBecomePossible:function(){},eventWasRejected:function(){},shouldBegin:function(){return!0},didBegin:function(){},didChange:function(){},shouldEnd:function(){return!0},didEnd:function(){},didCancel:function(){},blockApplicationGestureManagerIfSimultaneously:function(){if(!this.simultaneously){var a=this.view,b=function(b){return a===b},c=this.get("applicationGestureManager");c.block.apply(c,[a,b])}},attemptGestureEventDelivery:function(a,b){Em.assert("attemptGestureEventDelivery is called with eventName and event arguments",!!a&&!!b);var c=this._notifyViewOfGestureEvent(a,b);c||this.eventWasRejected()},distance:function(a){if(a.length<2)return 0;var b=a[0],c=a[1],d=b.pageX,e=b.pageY,f=c.pageX,g=c.pageY;return Math.sqrt((d-=f)*d+(e-=g)*e)},centerPointForTouches:function(a){for(var b=0,c=0,d=0,e=a.length;e>d;d++){var f=a[d];b+=f.pageX,c+=f.pageY}var g={x:b/a.length,y:c/a.length};return g},_notifyViewOfGestureEvent:function(a,b){var c=this.view[a],d=!1;return"function"===Em.typeOf(c)&&(d=c.call(this.view,this,b)),d},toString:function(){return Em.Gesture+"<"+Em.guidFor(this)+">"},_resetState:function(){this.touches.removeAllTouches()},touchStart:function(c){{var d=c.originalEvent.targetTouches,e=this.touches;a(this,"state")}b(e,"timestamp",Date.now());for(var f=0,g=d.length;g>f;f++){var h=d[f];null===e.touchWithId(h.identifier)&&(e.get("length")===a(this,"numberOfRequiredTouches")&&e.removeAllTouches(),e.addTouch(h))}e.get("length")<a(this,"numberOfRequiredTouches")?b(this,"state",Em.Gesture.WAITING_FOR_TOUCHES):this.gestureIsDiscrete?this.shouldBegin()&&(this.blockApplicationGestureManagerIfSimultaneously(),b(this,"state",Em.Gesture.BEGAN),this.didBegin()):(b(this,"state",Em.Gesture.POSSIBLE),this.didBecomePossible())},touchMove:function(c){var d=a(this,"state");if(d!==Em.Gesture.WAITING_FOR_TOUCHES&&d!==Em.Gesture.ENDED&&d!==Em.Gesture.CANCELLED){var e=c.originalEvent.changedTouches,f=this.touches;b(f,"timestamp",Date.now());for(var g=0,h=e.length;h>g;g++){var i=e[g];f.updateTouch(i)}d!==Em.Gesture.POSSIBLE||this.gestureIsDiscrete?(d===Em.Gesture.BEGAN||d===Em.Gesture.CHANGED)&&(b(this,"state",Em.Gesture.CHANGED),this.didChange(c),this.gestureIsDiscrete||this.attemptGestureEventDelivery(this.name+"Change",c)):this.shouldBegin()&&(this.blockApplicationGestureManagerIfSimultaneously(),b(this,"state",Em.Gesture.BEGAN),this.didBegin(),this.didChange(c),this.attemptGestureEventDelivery(this.name+"Start",c))}},touchEnd:function(c){var d=a(this,"state"),e=this.touches;b(e,"timestamp",Date.now());var f=c&&c.originalEvent?c.originalEvent.changedTouches:void 0;if(f)for(var g=0,h=f.length;h>g;g++){var i=f[g];e.updateTouch(i)}d!==Em.Gesture.BEGAN&&d!==Em.Gesture.CHANGED||!this.shouldEnd()||(b(this,"state",Em.Gesture.ENDED),this.didEnd(),this.attemptGestureEventDelivery(this.name+"End",c)),this._resetState()},touchCancel:function(c){var d=a(this,"state");d!==Em.Gesture.CANCELLED&&(b(this,"state",Em.Gesture.CANCELLED),this.didCancel(),this.gestureIsDiscrete||this.attemptGestureEventDelivery(this.name+"Cancel",c)),this._resetState()}}),Em.GestureDirection={Vertical:1,Horizontal:2},Em.OneGestureDirection={Right:1,Left:2,Down:4,Up:8},Em.Gesture.WAITING_FOR_TOUCHES=0,Em.Gesture.POSSIBLE=1,Em.Gesture.BEGAN=2,Em.Gesture.CHANGED=3,Em.Gesture.ENDED=4,Em.Gesture.CANCELLED=5}(),function(){Ember.set,Ember.get;Em.Application.reopen({gestureManager:Ember.computed(function(){return this.__container__.lookup("gesture:application")})}),Ember.Application.initializer({name:"gestureManager",before:"defaultGestures",initialize:function(a){a.register("gesture:application",Ember.ApplicationGestureManager)}}),Ember.Application.initializer({name:"defaultGestures",after:"gestureManager",initialize:function(a){var b=a.lookup("gesture:application");b.registerGesture("pan",Em.PanGestureRecognizer),b.registerGesture("pinch",Em.PinchGestureRecognizer),b.registerGesture("press",Em.PressGestureRecognizer),b.registerGesture("swipe",Em.SwipeGestureRecognizer),b.registerGesture("tap",Em.TapGestureRecognizer),b.registerGesture("touchHold",Em.TouchHoldGestureRecognizer)}})}(),function(){var a=Em.get,b=Em.set;Em.View.reopen({eventManager:null,init:function(){this._super(),this._createGestureManager()},_createGestureManager:function(){var c=a(this,"eventManager");if(!c){var d=a(this,"container").lookup("gesture:application"),e=d.knownGestures(),f=[],g=Em.GestureManager.create();Em.assert("You should register a gesture. Take a look at the registerGestures injection",!!e);for(var h in e)if(this[h+"Start"]||this[h+"Change"]||this[h+"End"]){var i;i=void 0!==this[h+"Options"]&&"object"==typeof this[h+"Options"]?this[h+"Options"]:{},i.name=h,i.view=this,i.manager=g;var j={};i.isEnabledBinding&&(j.isEnabledBinding=Ember.isGlobalPath(i.isEnabledBinding)?i.isEnabledBinding:"view."+i.isEnabledBinding,i=Ember.$.extend({},i),delete i.isEnabledBinding);var k=e[h].create(i,j);j.isEnabledBinding&&Ember.run.sync(),f.push(k)}b(g,"view",this),b(g,"gestures",f),b(this,"eventManager",g)}}})}(),function(){var a=Em.get,b=Em.set;Em.PinchGestureRecognizer=Em.Gesture.extend({scale:1,numberOfRequiredTouches:2,_startingDistanceBetweenTouches:null,_previousTimestamp:null,_previousDistance:0,_deltaThreshold:5,_previousScale:1,didBecomePossible:function(){this._startingDistanceBetweenTouches=this.distance(a(this.touches,"touches")),this._previousDistance=this._startingDistanceBetweenTouches,this._previousTimestamp=a(this.touches,"timestamp")},shouldBegin:function(){var b=this.distance(a(this.touches,"touches"));return Math.abs(b-this._startingDistanceBetweenTouches)>=this._deltaThreshold},didChange:function(){var c=(this._previousScale=a(this,"scale"),this.touches.timestamp-this._previousTimestamp),d=this.distance(a(this.touches,"touches")),e=d-this._previousDistance;b(this,"velocity",e/c),b(this,"scale",d/this._previousDistance),this._previousTimestamp=a(this.touches,"timestamp"),this._previousDistance=d},eventWasRejected:function(){b(this,"scale",this._previousScale)}})}(),function(){var a=Em.get,b=Em.set;Em.PanGestureRecognizer=Em.Gesture.extend({translation:null,initThreshold:5,direction:Em.GestureDirection.Horizontal|Em.GestureDirection.Vertical,_previousLocation:null,_previousTranslation:null,init:function(){this._super(),b(this,"translation",{x:0,y:0})},didBecomePossible:function(){this._previousLocation=this.centerPointForTouches(a(this.touches,"touches"))},shouldBegin:function(){var b=this._previousLocation,c=this.centerPointForTouches(a(this.touches,"touches")),d=b.x,e=b.y,f=c.x,g=c.y,h=!1;return this.direction&Em.GestureDirection.Vertical&&(h=Math.abs(e-g)>=this.initThreshold),!h&&this.direction&Em.GestureDirection.Horizontal&&(h=Math.abs(d-f)>=this.initThreshold),h},didChange:function(){var c=this._previousLocation,d=this.centerPointForTouches(a(this.touches,"touches")),e={x:d.x,y:d.y};e.x=d.x-c.x,e.y=d.y-c.y,this._previousTranslation=a(this,"translation"),b(this,"translation",e),this._previousLocation=d},eventWasRejected:function(){b(this,"translation",this._previousTranslation)},toString:function(){return Em.PanGestureRecognizer+"<"+Em.guidFor(this)+">"}})}(),function(){var a=Em.get,b=Em.set;Em.TapGestureRecognizer=Em.Gesture.extend({numberOfTaps:1,delayBetweenTaps:500,tapThreshold:10,gestureIsDiscrete:!0,_initialLocation:null,_waitingTimeout:null,_waitingForMoreTouches:!1,_internalTouches:null,init:function(){this._super(),this._internalTouches=Em.TouchList.create(),Em.assert(1===a(this,"numberOfRequiredTouches"),"TODO: implement!!")},shouldBegin:function(){return a(this.touches,"length")===a(this,"numberOfRequiredTouches")},didBegin:function(){if(this._initialLocation=this.centerPointForTouches(a(this.touches,"touches")),this._internalTouches.addTouch(this.touches[0]),this._waitingForMoreTouches=a(this._internalTouches,"length")<a(this,"numberOfTaps"),this._waitingForMoreTouches){var b=this;this._waitingTimeout=window.setTimeout(function(){b._waitingFired(b)},this.delayBetweenTaps)}},shouldEnd:function(){var b=this.centerPointForTouches(a(this.touches,"touches")),c=this._initialLocation.x,d=this._initialLocation.y,e=b.x,f=b.y,g=Math.sqrt((c-=e)*c+(d-=f)*d);return Math.abs(g)<this.tapThreshold&&!this._waitingForMoreTouches},didEnd:function(){window.clearTimeout(this._waitingTimeout),this._initialLocation=null,this._internalTouches.removeAllTouches()},_waitingFired:function(){this._initialLocation=null,this._internalTouches.removeAllTouches(),b(this,"state",Em.Gesture.CANCELLED);var a=this.name+"Cancel",c=new Em.TimeoutTouchEvent({type:Em.TimeoutTouchEventType.Cancel});this.attemptGestureEventDelivery(a,c),this._resetState()},toString:function(){return Em.TapGestureRecognizer+"<"+Em.guidFor(this)+">"}})}(),function(){var a=Em.get,b=Em.set;Em.PressGestureRecognizer=Em.Gesture.extend({pressPeriodThreshold:500,gestureIsDiscrete:!0,_initialLocation:null,_moveThreshold:10,_initialTimestamp:null,shouldBegin:function(){return a(this.touches,"length")===a(this,"numberOfRequiredTouches")},didBegin:function(){this._initialLocation=this.centerPointForTouches(a(this.touches,"touches")),this._initialTimestamp=a(this.touches,"timestamp")},shouldEnd:function(){var c=this.centerPointForTouches(a(this.touches,"touches")),d=this._initialLocation.x,e=this._initialLocation.y,f=c.x,g=c.y,h=Math.sqrt((d-=f)*d+(e-=g)*e),i=Math.abs(h)<this._moveThreshold,j=a(this.touches,"timestamp"),k=j-this._initialTimestamp>=this.pressPeriodThreshold,l=i&&k;return l||(b(this,"state",Em.Gesture.CANCELLED),this.didCancel()),l},didEnd:function(){this._resetCounters()},didCancel:function(){this._resetCounters()},_resetCounters:function(){this._initialLocation=null,this._initialTimestamp=null},toString:function(){return Em.PressGestureRecognizer+"<"+Em.guidFor(this)+">"}})}(),function(){var a=Em.get,b=Em.set;Em.TouchHoldGestureRecognizer=Em.Gesture.extend({holdPeriod:2e3,moveThreshold:50,gestureIsDiscrete:!0,_endTimeout:null,_targetElement:null,shouldBegin:function(){return a(this.touches,"length")===a(this,"numberOfRequiredTouches")},didBegin:function(){this._initialLocation=this.centerPointForTouches(a(this.touches,"touches"));var c=a(this.touches,"touches")[0].target;b(this,"_target",c);var d=this;this._endTimeout=window.setTimeout(function(){d._endFired(d)},this.holdPeriod)},didChange:function(){var c=this.centerPointForTouches(a(this.touches,"touches")),d=this._initialLocation.x,e=this._initialLocation.y,f=c.x,g=c.y,h=Math.sqrt((d-=f)*d+(e-=g)*e),i=Math.abs(h)<this.moveThreshold;i||(this._disableEndFired(),b(this,"state",Em.Gesture.CANCELLED))},shouldEnd:function(){return this._disableEndFired(),b(this,"state",Em.Gesture.CANCELLED),this.didCancel(),!1},_endFired:function(){if(this._disableEndFired(),this.state===Em.Gesture.BEGAN||this.state===Em.Gesture.CHANGED){b(this,"state",Em.Gesture.ENDED);var a=this.name+"End",c=new Em.TimeoutTouchEvent({type:Em.TimeoutTouchEventType.End});this.attemptGestureEventDelivery(a,c)}},_disableEndFired:function(){window.clearTimeout(this._endTimeout)},toString:function(){return Em.TouchHoldGestureRecognizer+"<"+Em.guidFor(this)+">"}})}(),function(){var a=Em.get,b=Em.set;Em.SwipeGestureRecognizer=Em.Gesture.extend({cancelPeriod:100,swipeThreshold:50,initThreshold:5,direction:Em.OneGestureDirection.Right,numberOfRequiredTouches:1,swipeDirection:null,_initialLocation:null,_previousLocation:null,_cancelTimeout:null,didBecomePossible:function(){this._previousLocation=this.centerPointForTouches(a(this.touches,"touches"))},shouldBegin:function(){var b=this._previousLocation,c=this.centerPointForTouches(a(this.touches,"touches")),d=b.x,e=b.y,f=c.x,g=c.y,h=!1;return this.direction&Em.OneGestureDirection.Right&&(h=f-d>this.initThreshold),!h&&this.direction&Em.OneGestureDirection.Left&&(h=d-f>this.initThreshold),!h&&this.direction&Em.OneGestureDirection.Down&&(h=g-e>this.initThreshold),!h&&this.direction&Em.OneGestureDirection.Up&&(h=e-g>this.initThreshold),h},didBegin:function(){this._initialLocation=this.centerPointForTouches(a(this.touches,"touches"));var b=this;this._cancelTimeout=window.setTimeout(function(){b._cancelFired(b)},this.cancelPeriod)},didChange:function(c){var d=this.centerPointForTouches(a(this.touches,"touches")),e=this._initialLocation.x,f=this._initialLocation.y,g=d.x,h=d.y,i=!1;if(this.direction&Em.OneGestureDirection.Right&&(i=g-e>this.swipeThreshold,this.swipeDirection=Em.OneGestureDirection.Right),!i&&this.direction&Em.OneGestureDirection.Left&&(i=e-g>this.swipeThreshold,this.swipeDirection=Em.OneGestureDirection.Left),!i&&this.direction&Em.OneGestureDirection.Down&&(i=h-f>this.swipeThreshold,this.swipeDirection=Em.OneGestureDirection.Down),!i&&this.direction&Em.OneGestureDirection.Up&&(i=f-h>this.swipeThreshold,this.swipeDirection=Em.OneGestureDirection.Up),i){this._disableCancelFired(),b(this,"state",Em.Gesture.ENDED);var j=this.name+"End";this.attemptGestureEventDelivery(j,c),this._resetState()}},shouldEnd:function(){return this._cancelFired(),!1},_cancelFired:function(){this._disableCancelFired(),b(this,"state",Em.Gesture.CANCELLED);var a=this.name+"Cancel",c=new Em.TimeoutTouchEvent({type:Em.TimeoutTouchEventType.Cancel});this.attemptGestureEventDelivery(a,c),this._resetState()},_disableCancelFired:function(){window.clearTimeout(this._cancelTimeout)},toString:function(){return Em.SwipeGestureRecognizer+"<"+Em.guidFor(this)+">"}})}(),window.fbAsyncInit=function(){FB.init({appId:"834430399919781",cookie:!0,xfbml:!0,version:"v2.0"}),FB.getLoginStatus(function(a){statusChangeCallback(a)})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk");var Api=function(){function a(a,b){return $.ajax({type:"PUT",url:F+"/users",data:a}).done(b)}function b(a,b){return $.ajax({type:"GET",url:F+"/users/"+a}).done(b)}function c(a){return $.ajax({type:"GET",url:F+"/users"}).done(a)}function d(){return $.ajax({type:"GET",url:F+"/users"})}function e(a,b,c){return $.ajax({type:"POST",url:F+"/users/"+a,data:b}).done(c)}function f(a,b){return $.ajax({type:"DELETE",url:F+"/users/"+a}).done(b)}function g(a,b,c){return $.ajax({type:"PUT",url:F+"/items/"+b+"/",data:a}).done(c)}function h(a,b,c){return $.ajax({type:"GET",url:F+"/items/"+b+"/"+a}).done(c)}function i(a,b){return $.ajax({type:"GET",url:F+"/items/"+a+"/"}).done(b)}function j(a,b,c,d){return $.ajax({type:"POST",url:F+"/items/"+c+"/"+a,data:b}).done(d)}function k(a,b,c){return $.ajax({type:"DELETE",url:F+"/items/"+b+"/"+a}).done(c)}function l(a,b,c){return $.ajax({type:"PUT",url:F+"/lists.users/",data:{lid:{S:a+""},uid:{S:b+""}}}).done(c)}function m(a,b,c){return $.ajax({type:"GET",url:F+"/lists.users/"+a+"/"+b}).done(c)}function n(a,b){return $.ajax({type:"GET",url:F+"/lists.users/"+a}).done(b)}function o(a){return $.ajax({type:"GET",url:F+"/lists.users/"}).done(a)}function p(a,b,c){return $.ajax({type:"DELETE",url:F+"/lists.users/"+a+"/"+b}).done(c)}function q(a,b,c){return $.ajax({type:"PUT",url:F+"/lists.items/",data:{lid:{S:a+""},iid:{S:b+""}}}).done(c)}function r(a,b,c){return $.ajax({type:"GET",url:F+"/lists.items/"+a+"/"+b}).done(c)}function s(a,b){return $.ajax({type:"GET",url:F+"/lists.items/"+a}).done(b)}function t(a){return $.ajax({type:"GET",url:F+"/lists.items/"}).done(a)}function u(a,b,c){return $.ajax({type:"DELETE",url:F+"/lists.items/"+a+"/"+b}).done(c)}function v(a,b,c,d){return $.ajax({type:"POST",url:F+"/items.users/"+a+"/"+b,data:c}).done(d)}function w(a,b,c){return $.ajax({type:"GET",url:F+"/items.users/"+a+"/"+b}).done(c)}function x(a,b){return $.ajax({type:"GET",url:F+"/items.users/"+a}).done(b)}function y(a){return $.ajax({type:"GET",url:F+"/items.users/"}).done(a)}function z(a,b,c){return $.ajax({type:"DELETE",url:F+"/items.users/"+a+"/"+b}).done(c)}function A(a,b,c,d){return $.ajax({type:"POST",url:F+"/users.items/"+a+"/"+b,data:c}).done(d)}function B(a,b,c){return $.ajax({type:"GET",url:F+"/users.items/"+a+"/"+b}).done(c)}function C(a,b){return $.ajax({type:"GET",url:F+"/users.items/"+a}).done(b)}function D(a){return $.ajax({type:"GET",url:F+"/users.items/"}).done(a)}function E(a,b,c){return $.ajax({type:"DELETE",url:F+"/users.items/"+a+"/"+b}).done(c)}var F="http://node.whatisphresh.com";return{putUser:a,getUser:b,getUsers:c,getUsersModel:d,postUser:e,deleteUser:f,putItem:g,getItem:h,getItems:i,postItem:j,deleteItem:k,putListUser:l,getListUser:m,getListUsers:n,getListsUsers:o,deleteListUser:p,putListItem:q,getListItem:r,getListItems:s,getListsItems:t,deleteListItem:u,postItemUser:v,getItemUser:w,getItemUsers:x,getItemsUsers:y,deleteItemUser:z,postUserItem:A,getUserItem:B,getUserItems:C,getUsersItems:D,deleteUserItem:E}}();console.log(Api);var SS=function(){function a(a,d){var e=0,f=0,g=0;async.whilst(function(){return 10>g&&f>=e},function(h){$.ajax({type:"GET",url:c+"/products?limit=50&cat="+a+"&offset="+e+b}).done(function(a){f=a.metadata.total,e+=a.metadata.limit,d(a.products),g++,h()})},function(a){a?console.log(a):console.log("count",g,"offset",e,"total",f)})}var b="&pid=uid1444-23870038-13",c="http://api.shopstyle.com/api/v2";return{getItemsInCat:a}}();console.log(SS),$.ajaxSetup({contentType:"application/json",processData:!1}),$.ajaxPrefilter(function(a){a.data&&(a.data=JSON.stringify(a.data))});var App=Ember.Application.create({LOG_TRANSITIONS:!0});App.Router.map(function(){this.resource("index",{path:"/"}),this.resource("login"),this.resource("discovery",{path:"/discovery/"},function(){this.route("description")}),this.resource("showroom",{path:"/showroom/:uid"}),this.resource("item",function(){this.route("description")}),this.resource("landing"),this.resource("ss"),this.resource("api")}),App.IndexController=Ember.ObjectController.extend({model:function(){return console.log("in model"),null}}),App.IndexRoute=Ember.Route.extend({afterModel:function(){console.log("index")}}),App.LoginController=Ember.ObjectController.extend({actions:{fb_login:function(){console.log("fb_login"),FB.login(function(a){console.log(a),FB.api("/me",function(a){console.log(a);var b={};$.each(a,function(c){b[c]={S:a[c]+""}}),Api.putUser(b,function(a){console.log(a),window.location="/index.html#discovery"})})},{scope:"public_profile,email,user_friends"})}}}),App.DiscoveryRoute=Ember.Route.extend({model:function(){return Api.getListItems("all-womens")},setupController:function(a,b){a.set("model",b),b.Items=_.shuffle(b.Items),""===a.get("topImgURL")&&Api.getItem(b.Items[0].iid.S,"womens",function(b){a.set("currentItem",b.Item);var c=JSON.parse(b.Item.imageSIZES.S);a.set("topImgURL",c.IPhone.url)})}}),App.DiscoveryController=Ember.ObjectController.extend(function(){function a(){console.log("share func")}function b(){var a=this.get("model");this.set("current",this.get("current")+1);var b=this;Api.getItem(a.Items[this.get("current")].iid.S,"womens",function(a){b.set("currentItem",a.Item);var c=JSON.parse(a.Item.imageSIZES.S);b.set("topImgURL",c.IPhone.url)})}function c(){console.log("trash"),b.apply(this)}function d(){console.log("keep");var a=this,c=this.get("currentItem").id.S,d=FB.getUserID(),e={keep:{Action:"PUT",Value:{S:(new Date).toISOString()}}};Api.postUserItem(d,c,e,function(){b.apply(a)})}function e(){var a=this.get("info_text");"i"===a?(this.set("info_text","x"),this.transitionToRoute("discovery.description")):"x"===a&&(this.set("info_text","i"),this.transitionToRoute("discovery"))}function f(){console.log("info_btn"),e.apply(this)}function g(){console.log("info_img"),e.apply(this)}function h(){console.log("showroom"),this.transitionToRoute("/showroom/"+FB.getUserID())}var i="i",j="",k=[],l=0,m={};return{info_text:i,current:l,currentItem:m,topImgURL:j,images:k,actions:{share:a,keep:d,trash:c,info_img:g,info_btn:f,showroom:h}}}()),App.DiscoveryDescriptionController=Ember.ObjectController.extend({needs:["discovery"],actions:{exit:function(){this.transitionToRoute("discovery")}}}),App.ShowroomRoute=Ember.Route.extend({model:function(a){return Api.getUserItems(a.uid)},setupController:function(a,b){a.model=b;var c={};async.each(b.Items,function(a,b){a.keep&&Api.getItem(a.iid.S,"womens",function(d){var e=JSON.parse(d.Item.imageSIZES.S);c[a.iid.S]=e.IPhone.url,b()})},function(){$.each(c,function(a,b){$('<div class="item"><img style="width:10em;" src="'+b+'" /></div>').appendTo($("#list"))})})}}),App.ShowroomController=Ember.ObjectController.extend(function(){function a(){this.transitionToRoute("discovery")}function b(){console.log(itemsArray())}var c={};return{items:c,actions:{exit:a,share:b}}}()),App.ItemController=Ember.ObjectController.extend({}),App.ItemDescriptionController=Ember.ObjectController.extend({});